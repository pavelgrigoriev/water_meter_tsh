### Установка зависимостей

```bash
pip install ultralytics
```

### Файлы

* `meter_reader.py` — основной скрипт
* `roi_model.pt` — модель сегментации ROI (классы: blue, red)
* `detect.pt` — модель детекции цифр

### Запуск

```bash
python meter_reader.py --img-path <путь_к_изображению_или_папке> [OPTIONS]
```

#### Основные параметры

| Параметр       | Описание                                                                                | По умолчанию           |
| -------------- | --------------------------------------------------------------------------------------- | ---------------------- |
| `--img-path`   | **(обязательно)** путь к файлу (`.jpg`, `.png`, `.jpeg`) | —                      |
| `--seg-model`  | Путь к файлу модели сегментации ROI                                                     | `roi_model.pt`         |
| `--det-model`  | Путь к файлу модели детекции цифр                                                       | `detect.pt`            |
| `--out-dir`    | Каталог для сохранения масок (если включены) и итогового `results.json`                 | `masked_preprocessed`  |
| `--seg-conf`   | Порог confidence для сегментационной модели (0–1) (ставить 0.1)                                     | `0.1`                  |
| `--det-conf`   | Порог confidence для детекционной модели (0–1) (ставить 0.1)                                              | `0.1`                  |
| `--save-masks` | Флаг: сохранять ли вырезанные ROI-кропы для отладки                                     | `false` (не сохранять) |

#### Примеры

1. **Чтение одного изображения**

   ```bash
   python meter_reader.py \
      --img-path ./images/meter1.jpg \
      --seg-model ./models/roi_model.pt \
      --det-model ./models/detect.pt \
      --out-dir ./out
   ```

   Результат: `./out/results.json` с показаниями.

### Формат выходного JSON

```json
{
  "cold_water_meter": "00321198",
  "hot_water_meter": "00405545"
}
```

* Если модель не нашла ни ROI, ни цифр, скрипт вернёт пустой JSON `{}`.

---
